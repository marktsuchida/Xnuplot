

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Xnuplot &mdash; Xnuplot v0.1dev documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Xnuplot v0.1dev documentation" href="#" />
    <link rel="next" title="Package xnuplot" href="xnuplot.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="xnuplot.html" title="Package xnuplot"
             accesskey="N">next</a> |</li>
        <li><a href="#">Xnuplot v0.1dev documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Xnuplot</a><ul>
<li><a class="reference internal" href="#quick-introduction">Quick introduction</a></li>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a><ul>
</ul>
</li>
<li><a class="reference internal" href="#indexes-and-tables">Indexes and tables</a></li>
</ul>
</li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="xnuplot.html"
                        title="next chapter">Package xnuplot</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="xnuplot">
<h1>Xnuplot<a class="headerlink" href="#xnuplot" title="Permalink to this headline">¶</a></h1>
<p><strong>Xnuplot</strong> (&#8220;ex-new-plot&#8221;) is a Python package for driving the interactive
plotting program <a class="reference external" href="http://www.gnuplot.info/">Gnuplot</a>. It uses Noah Spurrier&#8217;s <a class="reference external" href="http://www.noah.org/wiki/pexpect">Pexpect</a> module for
communication with Gnuplot (hence the name <em>Xnuplot</em>), and can efficiently pipe
text as well as binary data, including data contained in <a class="reference external" href="http://numpy.scipy.org/">NumPy</a> arrays, to
Gnuplot.</p>
<p>Currently, Xnuplot only works on UNIX platforms, where Pexpect runs. I expect
that it will be possible to port Xnuplot to Windows using the <a class="reference external" href="https://bitbucket.org/geertj/winpexpect/wiki/Home">WinPexpect</a>
module, though I don&#8217;t know when I&#8217;ll have a chance to try this. Alternatively,
you might want to try the <a class="reference external" href="http://gnuplot-py.sourceforge.net/">Gnuplot.py</a> module, which is cross-platform.</p>
<p>This documentation for Xnuplot is not yet complete, so you will need to look at
the code for some advanced features. Parts of the code (the
<a class="reference internal" href="utils.html#module-xnuplot.utils" title="xnuplot.utils"><tt class="xref py py-mod docutils literal"><span class="pre">xnuplot.utils</span></tt></a> and <a class="reference internal" href="numutils.html#module-xnuplot.numutils" title="xnuplot.numutils"><tt class="xref py py-mod docutils literal"><span class="pre">xnuplot.numutils</span></tt></a> modules) are experimental, so
expect changes to the API.</p>
<p>Xnuplot has so far only been tested in a very specific environment (Mac OS X
and Gnuplot 4.4.0). Bug reports and other feedback would be highly appreciated.</p>
<div class="section" id="quick-introduction">
<h2>Quick introduction<a class="headerlink" href="#quick-introduction" title="Permalink to this headline">¶</a></h2>
<p>Xnuplot does not attempt to construct a full abstraction of Gnuplot commands;
rather it aims to provide transparent access to as much as possible of
Gnuplot&#8217;s functionality, while taking care of the logistics of passing binary
and ascii data to Gnuplot. No attempt is made to provide Python methods for
things that can be done by issuing a simple Gnuplot command.</p>
<p>You will therefore need to be familiar with at least the basics of using
Gnuplot as a standalone application. Gnuplot has an excellent <a class="reference external" href="http://www.gnuplot.info/documentation.html">manual</a>.</p>
<p>To follow the examples below, you will need to be familiar with the Gnuplot
keywords <tt class="docutils literal"><span class="pre">plot</span></tt>, <tt class="docutils literal"><span class="pre">with</span></tt>, <tt class="docutils literal"><span class="pre">using</span></tt>, <tt class="docutils literal"><span class="pre">set</span></tt>, and <tt class="docutils literal"><span class="pre">xrange</span></tt>, among others.</p>
<p>Here&#8217;s a basic example of plotting functions and data.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">xnuplot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot</span> <span class="o">=</span> <span class="n">xnuplot</span><span class="o">.</span><span class="n">Plot</span><span class="p">()</span> <span class="c"># A container object that retains the source data.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;sin(x)&quot;</span><span class="p">)</span> <span class="c"># Plot a function.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot</span><span class="p">(</span><span class="s">&quot;set xrange [0.0:2.0]&quot;</span><span class="p">)</span> <span class="c"># Send any Gnuplot command. Replotting is automatic by default.</span>
<span class="go">&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&quot;0.0 0.0</span><span class="se">\n</span><span class="s">0.5 1.0</span><span class="se">\n</span><span class="s">1.0 0.5&quot;</span><span class="p">,</span> <span class="s">&quot;notitle with linespoints&quot;</span><span class="p">))</span> <span class="c"># Plot data.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&quot;test.xnuplot&quot;</span><span class="p">)</span> <span class="c"># Save the plot to a file, with all its data and settings.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">plot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot</span> <span class="o">=</span> <span class="n">xnuplot</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;test.xnuplot&quot;</span><span class="p">)</span> <span class="c"># Open and display the saved plot.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot</span> <span class="c"># Plot objects are a subclass of list.</span>
<span class="go">&lt;Plot [&#39;sin(x)&#39;, &lt;PlotData source=str options=&#39;notitle with linespoints&#39; mode=pipe&gt;]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;cos(x)&quot;</span> <span class="c"># So you can replace plot items (functions or data).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot</span><span class="o">.</span><span class="n">interact</span><span class="p">()</span> <span class="c"># Enter the Gnuplot command line.</span>
<span class="go">escape character is `^]&#39;</span>

<span class="go">gnuplot&gt; show yrange</span>

<span class="go">        set yrange [ * : * ] noreverse nowriteback  # (currently [-0.600000:1.00000] )</span>

<span class="go">gnuplot&gt; set style function linespoints</span>
<span class="go">gnuplot&gt; # Typing CTRL-] exits interactive mode.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c"># Use any list method to edit the plot.</span>
<span class="go">&#39;cos(x)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot</span>
<span class="go">&lt;Plot [&lt;PlotData source=str options=&#39;notitle with linespoints&#39; mode=pipe&gt;]&gt;</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="numplot.html#module-xnuplot.numplot" title="xnuplot.numplot"><tt class="xref py py-mod docutils literal"><span class="pre">xnuplot.numplot</span></tt></a> module makes it easy to plot data from NumPy arrays.
Instances of <a class="reference internal" href="numplot.html#xnuplot.numplot.Plot" title="xnuplot.numplot.Plot"><tt class="xref py py-class docutils literal"><span class="pre">xnuplot.numplot.Plot</span></tt></a> are similar to those of
<a class="reference internal" href="xnuplot.html#xnuplot.Plot" title="xnuplot.Plot"><tt class="xref py py-class docutils literal"><span class="pre">xnuplot.Plot</span></tt></a>, except that they provide convenience methods for
handling NumPy arrays.</p>
<p>You will need a basic understanding of how indexing of binary data works in
Gnuplot (some day I&#8217;ll write a tutorial on this, because I found it quite
confusing until I got it). Note that the data is piped to Gnuplot in its binary
form, without the overhead of converting it into ascii.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">xnuplot</span> <span class="kn">import</span> <span class="n">numplot</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">5.0</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">))</span> <span class="c"># Make a 200-by-3 array.</span>
<span class="n">plot</span> <span class="o">=</span> <span class="n">numplot</span><span class="o">.</span><span class="n">Plot</span><span class="p">()</span>
<span class="n">plot</span><span class="o">.</span><span class="n">append_record</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="s">&quot;notitle with lines&quot;</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">plot</span><span class="o">.</span><span class="n">append_record</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="s">&quot;notitle with lines&quot;</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>Just to showcase some high-level features, here is an example of plotting an
image. There is even experimental support for getting mouse input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">xnuplot</span> <span class="kn">import</span> <span class="n">numplot</span><span class="p">,</span> <span class="n">utils</span><span class="p">,</span> <span class="n">numutils</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">10.0</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">outer</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(512, 512)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">numutils</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">plot</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span> <span class="c"># Append the image to the plot and adjusts axes.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot</span>
<span class="go">&lt;Plot [&lt;PlotData source=ndarray options=&quot;binary array=(512,512) format=&#39;%float64&#39; notitle with image&quot; mode=pipe&gt;]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot</span><span class="p">(</span><span class="s">&quot;set palette gray&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vertices</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">input_polyline</span><span class="p">(</span><span class="n">plot</span><span class="p">,</span> <span class="n">close_polygon</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c"># Click to draw and hit Enter to exit.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vertices</span>
<span class="go">[(212.55489443378099, 389.12291950886799),</span>
<span class="go"> (130.79213051823399, 235.31336971350601),</span>
<span class="go"> (311.81017274472202, 137.383765347885),</span>
<span class="go"> (422.46506717850298, 298.87680763983599),</span>
<span class="go"> (344.63320537428001, 429.775579809004)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span> <span class="c"># Hide the polygon that the user drew.</span>
<span class="go">(&#39;2.125549e+02 3.891229e+02\n1.307921e+02 2.353134e+02\n3.118102e+02 1.373838e+02\n4.224651e+02 2.988768e+02\n3.446332e+02 4.297756e+02\n2.125549e+02 3.891229e+02&#39;,</span>
<span class="go"> &#39;axes x1y1 notitle with lines&#39;)</span>
</pre></div>
</div>
<p>Last but not least, there is a simple command line script, <strong class="program">xnuplot</strong>,
to display saved plots. It allows you to edit the plot settings (though not the
data) from the Gnuplot command line, and is handy for minor tweaks like
modifying the plot title as well as for plotting to an image or postscript
file. Type <tt class="docutils literal"><span class="pre">xnuplot</span> <span class="pre">--help</span></tt> to get a list of command line options.</p>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Python 2.6 or 2.7 (not Python 3+)</li>
<li>Gnuplot 4.4 or above</li>
<li>Pexpect (tested with version 2.3)</li>
<li>A UNIX operating system on which Pexpected works properly (Xnuplot is
currently developed and tested on Mac OS X)</li>
</ul>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>Start with the <tt class="docutils literal"><span class="pre">xnuplot</span></tt> package and <tt class="docutils literal"><span class="pre">xnuplot.numplot</span></tt> module for the
basics.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="xnuplot.html">Package xnuplot</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gnuplot.html">Module xnuplot.gnuplot</a></li>
<li class="toctree-l2"><a class="reference internal" href="numplot.html">Module xnuplot.numplot</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Module xnuplot.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="numutils.html">Module xnuplot.numutils</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="indexes-and-tables">
<h2>Indexes and tables<a class="headerlink" href="#indexes-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="xnuplot.html" title="Package xnuplot"
             >next</a> |</li>
        <li><a href="#">Xnuplot v0.1dev documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Mark A. Tsuchida.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>